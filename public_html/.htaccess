# InfinityFree Root Configuration
RewriteEngine On

# MIME Types for Assets (Critical for InfinityFree)
AddType text/css .css
AddType application/javascript .js
AddType application/json .json
AddType image/svg+xml .svg
AddType font/woff2 .woff2
AddType font/woff .woff
AddType font/ttf .ttf

# Cache Control for Assets
<FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg)$">
    ExpiresActive On
    ExpiresDefault "access plus 1 year"
    Header append Cache-Control "public"
</FilesMatch>

# Security Headers
Header always set X-Content-Type-Options "nosniff"
Header always set X-Frame-Options "SAMEORIGIN"
Header always set X-XSS-Protection "1; mode=block"

# Hide .env files
<Files ".env*">
    Order allow,deny
    Deny from all
</Files>

# Disable directory browsing
Options -Indexes

# React Router SPA Configuration
# Handle client-side routing - redirect all requests to index.html unless they're files/directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api/
RewriteRule ^(.+)$ /index.html [QSA,L]

# PHP Configuration
php_value max_execution_time 300
php_value memory_limit 128M